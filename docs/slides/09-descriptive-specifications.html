<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Deskriptive Spezifikationen</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/solarized.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section class="center">
                <h2>
                    Deskriptive Spezifikationen
                </h2>
                <p>
                    <small> Marcel L&uuml;thi <br>
                        Departement Mathematik und Informatik </small>
                </p>
                <p>
                    <img class="plain" src="images/uni-basel-logo.png" style="width:6cm" />
                </p>
            </section>


            <section>
                <h3>Entity Relationship Model</h3>

                <blockquote>
                    Entit&auml;t: Individuell identifizierbares Objekt der Wirklichkeit
                    <br>
                    <text style="font-size:small"> Wikipedia</text>
                </blockquote>
                <div style="float:left;width:80%">
                    <ul>
                        <li>ER-Diagramme sind Vorl&auml;ufer der UML Klassendiagramme</li>
                        <li>Drei Kernstrukturen:</li>
                        <ul>
                            <li>Entit&auml;ten</li>
                            <li>Beziehungen zwischen Entit&auml;ten</li>
                            <li>Attribute der Entit&auml;ten</li>
                        </ul>
                    </ul>
                </div>
                <div style="float:right;width:20%">
                    <img src="images/erm-diagram.png" class="plain" />
                </div>

            </section>
            <section>
                <h3>ERM: Kardinalit&auml;ten</h3>

                <img src="images/erm-cardinality.png" style="width:80%" class="plain" />
                <ul>
                    <li>Keine standardisierte Notation. </li>
                    <ul>
                        <li>Unterschiedliche Varianten m&ouml;glich</li>
                    </ul>
                </ul>

            </section>
            <section>
                <h3>ERM: Beispiel</h3>

                <img src="images/erm-diagram-cardinalities.png" style="width:80%" class="plain" />
                <ul>
                    <li>Beziehungen k&ouml;nnen partiell sein:</li>
                    <ul>
                        <li>Nicht alle Elemente sind Teil der Beziehung</li>
                        <li>Beispiel: Nicht jeder Mitarbeiter leitet ein Projekt</li>

                    </ul>
                </ul>

            </section>

            <section>
                <h3>Entity Relationship Model</h3>
                <ul>
                    <li>Komplementieren Datenflussdiagramme</li>
                    <ul>
                        <li>Vergl. OO: Daten und Operationen sind zusammengefasst</li>
                    </ul>
                    <li>Noch immer sehr popul&auml;r f&uuml;r Datenmodellierung</li>
                    <li>Einfach - daher auch f&uuml;r nicht Experten verst&auml;ndlich</li>
                    <li>Nur Semi-formal</li>
                    <ul>
                        <li>Keine Einheitliche Notation oder Semantik</li>
                    </ul>
                </ul>

            </section>


            <section>
                <h3>Logische Spezifikation</h3>

                <div style="width:50%; float:left">
                    <figure>
                        <img src="images/frege.jpg" class="plain" style="width:50%"/>
                        <figcaption style="font-size:small">Gottlob Frege: (Bild in Public Domain)</figcaption>
                    </figure>
                </div>
                <div style="float:right; width:50%">
                <ul>
                    <li> Logik (erster Stufe) l&auml;sst uns: </li>
                    <ul>
                        <li>Eigenschaften formal ausdr&uuml;cken</li>
                        <li>Neue Eigenschaften ableiten</li>
                    </ul>
                </ul>
            </div>
            </section>

            <section>
                <h3>Logik erster Stufe</h3>

                <ul>
                    <li> Audruck aus Variablen, Funktionen, Konstanten, Klammern.</li>
                        <ul><li>wie in Arithmetik</li></ul> 
                    <li> Typ eines Ausdrucks ist Wahr oder Falsch</li>
                    <li> Ausdr&uuml;cke k&ouml;nnen verbunden werden mit
                        <br/>
                        <text class="code">und </text>($\texttt{and}$),
                        <text class="code">oder</text> ($\texttt{or}$),
                        <text class="code">impliziert</text> ($\texttt{implies}$),
                        <text class="code">nicht</text> ($\texttt{not}$),
                        <text class="code">genau dann</text> ($\texttt{iff}$)</li>
                    <li> Quantoren:
                        <text class="code">Existiert</text> ($\texttt{exists}$) und
                        <text class="code">f&uuml;r alle</text> <br/>($\texttt{forall}$)</li>
                </ul>

            </section>

            <section>
                <h3>Logik erster Stufe: Beispielformeln</h3>

                <ul>
                    <li> $x > y \texttt{ and } y > z \texttt{ implies } x > z $ </li>
                    <li class="fragment"> $x = y \texttt{ iff } y = x$</li>
                    <li class="fragment"> $\texttt{forall } x,y,z \; (x > y \texttt{ and } y > z \texttt{ implies } x > z)$</li>
                    <li class="fragment"> $ x + 1
                        < x - 1$</li>
                            <li class="fragment"> $ \texttt{forall } x \; (\texttt{ exists } \; y \; (y=x + z))$ </li>
                            <li class="fragment"> $x > 3 \texttt{ or } x
                                < -6$</li>
                </ul>
            </section>

            <section>
                <h3>Spezifizieren von Programmen</h3>

                Eigenschaft von Programm $P$ wird definiert als 
                \[ \{\texttt{pre}(i_1, i_2, \ldots, i_n\} \\ P \\ \{\texttt{post}(o_1, o_2, \ldots, o_m,
                i_1, i_2, \ldots, i_n\} \\ \]

                <ul>
                        <li>$i_1, \ldots, i_n$ sind alle Eingaben</li>
                        <li>$o_1, \ldots, o_m$ sind alle Ausgaben</li>
    
                    <li>$\texttt{pre }$ ist eine <mark class="highlight">Vorbedingung</mark> (precondition)</li>
                    <li>$\texttt{post }$ ist eine <mark class="highlight">Nachbedingung</mark> (postcondition)</li>
                </ul>


            </section>

            <section>
                <h3>Beispiel 1</h3>
                <ul>
                    <li>Division </li>
                </ul>
                <blockquote style="width:100%;margin-left:auto; margin-right:auto">

                    \[ \{ \texttt{ exists } z \; (i_1 = z \cdot i_2) \} \\ P \\ \{ o_1 = i_1 / i_2\} \]
                </blockquote>
            </section>

            <section>
                <h3>Beispiel 2</h3>
                <ul>
                    <li>Division mit st&auml;rkerer Anforderung an Programm </li>
                </ul>
                <blockquote style="width:100%;margin-left:auto; margin-right:auto">

                    \[ \{ i_1 > i_2 \} \\ P \\ \{ i_1 = i_2 \cdot o_1 + o_2 \texttt{ and } o_2 \ge 0 \wedge o_2 \le i_2\} \]
                </blockquote>

                <div style="text-align:left">
                <ul>
                    <li>St&auml;rkere Anforderung:
                        <ul><li>schw&auml;chere Vorbedingungen 
                        </li>
                        und/oder
                        <li>st&auml;rkere Nachbedingungen</li>
                    </ul>
                </ul>
            </div>
            </section>
            <section>
                <h3>Beispiel 3</h3>
                <ul>
                    <li>Keine Vorbedingung.</li>
                    <li>Was macht das Programm?</li>
                </ul>
                <blockquote style="width:100%;margin-left:auto; margin-right:auto">

                    \[ \{ \texttt{ true } \} \\ P \\ \{ (o = i_1 \texttt{ or } o = i_2) \texttt{ and } (o \le i_1 \texttt{ and } o \le i_2\} \]
                </blockquote>
            </section>


            <section>
                <h3>Beispiel 4</h3>
                <ul>
                    <li>Gr&ouml;sster gemeinsamer Teiler </li>
                </ul>

                <blockquote style="width:100%;margin-left:auto; margin-right:auto">

                    \begin{align} \{ & i_1 > 0 \texttt { and } i_2 > 0 \} \\ &P \\ \{ & \\ & (\texttt{ exists } z_1, z_2 \; (i_1 = o \cdot z_1 \texttt{ and } i_2 = o \cdot
                    z_2) \\ & \texttt{ and } \texttt{ not } \\
                    & (\texttt{exists } h  ( \texttt { exists } z_1, z_2 \\ &  (i_1 = h \cdot z_1 \texttt{ and } i_2 = h \cdot z_2)
                     \texttt{ and } h > o)) \\ &\} \end{align}
                </blockquote>
            </section>

            <section>
                <h3>Spezifizieren von Prozeduren/Funktionen</h3>

                <ul>
                    <li>Prozedure und Funktionen k&ouml;nnen genau wie Programme spezifiziert werden</li>
                    <li>Vor/Nachbedingungen haben Zugriff auf Programm variablen</li>
                </ul>
                <blockquote style="width:100%;margin-left:auto; margin-right:auto">
                    \begin{align} &\{n > 0\} \\ &\text{procedure reverse(a: in out IntArray; n : in Integer)} \\ &\{\forall i (1 \le i \le n)
                    \texttt{ implies } (a(i) = \text{old_a}(n-i+1) ) \} \end{align}
                </blockquote>
            </section>


            <section>
                <h3>Spezifizieren von Klassen : Invarianten</h3>

                <ul>
                    <li><mark class="highlight">Invarianten</mark> beschreiben Eigenschaften die sich nicht &auml;ndern</li>
                    <li>Wichtig beim spezifizieren von Klassen</li>
                    <ul>
                        <li>Eigenschaft muss gelten welche Methoden und in welcher Reihenfolge aufgerufen werden</li>
                    </ul>
                </ul>
                <blockquote style="width:100%;margin-left:auto; margin-right:auto">
                    \begin{align} &\text{// Invariante in Klasse Set} \\ &\text{ // Set wird mit Array impl definiert } \\ &\forall i, j \; (1
                    \le i \le \text{ length } \texttt{ and } 1 \le j \le \text{ length } \texttt{ and } i \neq j) \\ &\implies \text{impl}[i]
                    \neq \text{impl}[j] \end{align}
                </blockquote>

            </section>

            <section>
                <h3>Umsetzung in Java: JML</h3>
                <ul>
                    <li>JML: Java Modeling Language (
                        <a href="https://openjml.org/">openjml.org</a>)</li>
                </ul>
                <pre><code data-trim class="java">
                        public class BankAccount {
                            final static int MAX_BAL = 1000;
                            int balance;
                            /*@ invariant 0 <= balance &&
                            balance <= MAX_BAL;
                            @*/

                            /*@ requires amount >= 0;
                            ensures balance == \old(balance)-amount &&
                            \result == balance;
                            @*/
                            public int debit(int amount) {
                            ...
                            }
                </code></pre>
            </section>

            <section>
                <h3>Umsetzung in UML: OCL</h3>
                <ul>
                    <li>OCL: Object Constraint Language (
                        <a href="http://www.omg.org/spec/OCL/About-OCL/">www.omg.org</a>)</li>
                    <li>Designed um Eigenschaften/Einschr&auml;nkungen in OO Systemen zu spezifizieren</li>
                </ul>

                <div style="text-align:left">
                    <p>Beispiel OO Design:</p>
                    <img src="images/ocl-example.png" class="plain" style="width:80%; margin-left:auto; margin-right:auto" />
                    <li style="font-size:x-small">Beispiel: Wikipedia (https://de.wikipedia.org/wiki/Object_Constraint_Language)</li>
                </div>
            </section>

            <section>
                <h3>Umsetzung in UML: OCL</h3>

                <div style="text-align:left">
                    Beispiele von Constraints in OCL:
                    <ul style="font-size:smaller">
                        <li class="fragment">context Person inv: self.alter &ge; 0 </li>
                        <li class="fragment"> context Person inv: self.eltern $\rightarrow$ forAll(e|e.alter>self.alter)</li>
                        <li class="fragment">context Person inv: self.eltern->size() &le; 2</li>
                        <li class="fragment">context Person::bekommtKind()
                            <br/>post: self.kinder->notEmpty()
                            <br/> &nbsp;&nbsp;&nbsp; and self.kinder->size() > self.kinder@pre->size()</li>
                        <li class="fragment">context Person inv: self.alter &le; 18 implies self.autos->isEmpty()</li>
                        <li class="fragment">context Auto inv: self.erstzulassung &ge; self.baujahr</li>
                        <li class="fragment">context Person inv: Person.allInstances()->exists(p | p.autos->size() > 0)</li>
                    </ul>
                </div>
            </section>

            <section>
                <h3>Algebraische Spezifikationen</h3>
                <blockquote>
                    Algebra: Eine Menge $A$ mit Operationen $f_1, \ldots, f_n$ wobei $f_i : A \times A \times \ldots \times A \to A$
                </blockquote>

                <div style="text-align:left">
                    <p>Beispiel:</p>
                    <ul>
                        <li>Ganze Zahlen $\mathbb{Z}$ mit </li>
                        <ul> Addition: $+ : \mathbb{Z} \times \mathbb{Z} \to \mathbb{Z}$</ul>
                        <ul> Multiplikation: $\cdot : \mathbb{Z} \times \mathbb{Z} \to \mathbb{Z}$</ul>
                    </ul>
                </div>
            </section>

            <section>
                <h3>Algebraische Spezifikationen</h3>
                <blockquote>
                    Heterogene Algebra: Ein System von Mengen $A_1, \ldots, A_m$ mit Operationen $f_1, \ldots, f_n$ wobei $f_i : A_{j_1} \times
                    A_{j_2} \times \ldots \times A_{j_m} \to A_k$
                </blockquote>

                <ul>
                    <li>Ideal um Abstrakte Datentypen zu spezifizieren</li>
                </ul>
                <div style="text-align:left">
                        <p>Beispiel Strings</p>
                    <ul>
                        <li>Mengen : Strings $S$ und Nat&uuml;rliche Zahlen $\mathbb{N}$</li>
                        <ul> Konkatenation: $+ : S \times S \to S$</ul>
                        <ul> L&auml;nge: $len : S \to \mathbb{N}$</ul>
                        </ul>
                </div>
                
            </section>
            <section>
                <h3>Beispiel Spezifikation: Syntax</h3>
                <pre><code data-trim class="haskell" >
                         
                        algebra StringSpec;
                            sets String, Char, Int, Bool; 
                            operations
                                new: () -> String;
                                append: String, String -> String;
                                add: String, Char -> String;
                                length: String -> Int;
                                isEmpty: String -> Bool;
                                equal: String, String -> Bool 
                                ...
                    </code></pre>
            </section>

            <section>
                <h3>Beispiel Spezifikation: Semantik</h3>
                <pre><code data-trim class="haskell">
                    ...
                constrains new, append, add, length, isEmpty, equal 

                forall [s, s1, s2: String; c: Char]
                    isEmpty (new ()) = true;
                    isEmpty (add (s, c)) = false;
                    length (new ()) = 0;
                    length (add (s, c)) = length (s) + 1;
                    append (s, new ()) = s;
                    append (s1, add (s2,c)) = add (append (s1,s2),c);
                    equal (new (),new ()) = true;
                    equal (new (), add (s, c)) = false;
                    equal (add (s, c), new ()) = false; 
                    equal (add (s1, c), add (s2, c) = equal (s1,s2);
                end StringSpec.
            </code></pre>
            </section>

            <section>
                <h3>Ableitung von neuen Eigenschaften</h3>

                <ul>
                    <li>K&ouml;nnen wir folgendes Statement herleiten?</li>                    
                </ul>
                <pre><code>
                    append(new(), add(new(), c)) = add(new(), c)
                </code></pre>
            </section>

            <section>
                <h3>Unit Tests</h3>
                <ul>
                    <li>Wie unterscheiden sich ER Diagramme von UML Klassendiagrammen?</li>
                    <li>UML ist formal spezifiziert. Weshalb brauchen wir OCL trotzdem?</li>
                    <li>Weshalb eignen sich algebraische Spezifikationen gut um ADTs zu spezifizieren?</li>
                    <li>Wie k&ouml;nnen mit logischen und algebraischen Spezifikationen neue Einsichten &uuml;ber das System gewonnen werden? </li>
                    <ul><li>Wie passiert das in (formal definierten) konstruktiven Spezifikationen?</li></ul>

                    </li>
                </ul>
            </section>
        </div>
    </div>



    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
        file: ///home/luetma00/documents/teaching/sweng/theory/lecture1/admin.html#/1
        // More info about config & dependencies:
        // - https://github.com/hakimel/reveal.js#configuration
        // - https://github.com/hakimel/reveal.js#dependencies
        Reveal.initialize({
            center: false,

            chalkboard: {
                src: "chalkboard.json",
                readOnly: undefined,
                transition: 800,
                theme: "whiteboard",
                //toggleChalkboardButton: { left: "30px", bottom: "30px", top: "auto", right: "auto" },
                //toggleNotesButton: { left: "30px", bottom: "30px", top: "auto", right: "auto" },
                // configuration options for notes canvas and chalkboard
                color: ['rgba(0,0,255,1)', 'rgba(255,255,255,0.5)'],
                background: ['rgba(127,127,127,.1)', 'plugin/chalkboard/img/whiteboard.png'],
                pen: ['url(plugin/chalkboard/img/boardmarker.png), auto', 'url(plugin/chalkboard/img/boardmarker.png), auto'],
            },
            dependencies: [{
                src: 'plugin/markdown/marked.js'
            },
            {
                src: 'plugin/markdown/markdown.js'
            },
            { src: 'plugin/math/math.js', async: true },
            {
                src: 'plugin/notes/notes.js',
                async: true
            },
            {
                src: 'plugin/chalkboard/chalkboard.js'
            },
            {
                src: 'plugin/highlight/highlight.js',
                async: true,
                callback: function () {
                    hljs.initHighlightingOnLoad();
                }
            }
            ],
            math: {
                // mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
                config: 'TeX-AMS_HTML-full'
            },
            keyboard: {
                67: function () {
                    RevealChalkboard.toggleNotesCanvas()
                }, // toggle notes canvas when 'c' is pressed
                66: function () {
                    RevealChalkboard.toggleChalkboard()
                }, // toggle chalkboard when 'b' is pressed
                46: function () {
                    RevealChalkboard.clear()
                }, // clear chalkboard when 'DEL' is pressed
                8: function () {
                    RevealChalkboard.reset()
                }, // reset chalkboard data on current slide when 'BACKSPACE' is pressed
                68: function () {
                    RevealChalkboard.download()
                }, // downlad recorded chalkboard drawing when 'd' is pressed
            },
        });
    </script>
</body>

</html>